<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ScoreloopCore: Game Items</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ScoreloopCore</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d7/d56/integrate-dlcs.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Game Items </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>You can use Scoreloop's infrastructure to handle the distribution of virtual goods. Scoreloop can manage the ownership and offer additional data attached to a Game Item.</p>
<p>The following table below gives an overview of the classes (including the purpose) associated with Game Items. </p>
<table class="doxtable">
<tr>
<th>Class</th><th>Purpose  </th></tr>
<tr>
<td><a class="el" href="../../d0/da2/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_game_item.html">GameItem</a></td><td><ul>
<li>
Models a downloadable content. </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d2/d21/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_game_item_controller.html">GameItemController</a></td><td><ul>
<li>
Download the content of a given game item </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d0/d46/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_game_items_controller.html">GameItemsController</a></td><td><ul>
<li>
Retrieves the list of all game items currently stored on the server </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../dc/d8c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_payment.html">Payment</a></td><td><ul>
<li>
Holds information about a payment of a user </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../dd/d57/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_payment_method.html">PaymentMethod</a></td><td><ul>
<li>
Models a PaymentMethod used in the payment process </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d2/d1e/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_payment_provider.html">PaymentProvider</a></td><td><ul>
<li>
Models the Payment Provider associated with the payment </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../dd/dcd/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_payment_controller.html">PaymentController</a></td><td><ul>
<li>
Checks for the status of a given payment on the server </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d6/de1/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_payment_methods_controller.html">PaymentMethodsController</a></td><td><ul>
<li>
Retrieving the available payment methods for a game item </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d2/daf/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_payment_provider_controller.html">PaymentProviderController</a></td><td><ul>
<li>
Manage the purchase of a given GameItem </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../d4/d44/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_pending_payment_processor.html">PendingPaymentProcessor</a></td><td><ul>
<li>
Handles the pending payments. </li>
</ul>
</td></tr>
</table>
<h2><a class="anchor" id="dlc-integration"></a>
Basic Integration</h2>
<p>Integrating GameItems into your game consists of the following steps:</p>
<ul>
<li>Configure GameItems on developer website</li>
<li>Retrieving the list of GameItems supported by your game.</li>
<li>Downloading a GameItem.</li>
</ul>
<p><b> 1. Configuring Game Items</b></p>
<p>All downloadable content for your game must be configured through Scoreloopʼs Developer website (<a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a>). Developers can choose to configure an item of downloadable content and upload content for the item to be downloaded by users.</p>
<p>To make use of game items in your game, you first need to setup your content on <a href="https://developer.scoreloop.com.">https://developer.scoreloop.com.</a> In your Game account, there is a menu called 'Game Items', navigate to that page. You need to then select “create game item” and there you will need to enter the name of your game Item, a short description of it, optionally some text based metadata, tags etc. You can upload your content for the game item in the Data field. Please note that you need to specify the Price tier as free, or the appropriate ones (payable through google or in-game currency). Once you have entered the details, click on Create Item and the game item will be created for you. You are free to configure multiple game Items in your game.</p>
<p>Once you have created the game Items, you can see the list of game Items created in your game. Next to each game-item, there is a button "Images" and there, you can actually add as many images as you like for this game-item. They are not downloaded as part of the game-item, when you request content. They are stored in Scoreloop cloud and you just have "name" - "url link" dictionary as part of the description data when you list them using our APIs. You can specify the image identifier of one of the images to be “default” and that image would be the default image for the GameItem.</p>
<p><b> 2. Retrieving the list of GameItems supported</b></p>
<p>Steps involved are:</p>
<ul>
<li>Get an instance of <a class="el" href="../../d0/d46/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_game_items_controller.html">GameItemsController</a> or re-use an existing one.</li>
<li>Set the options for filtering the gameItems.</li>
<li>Request the list of game items using loadGameItems.</li>
<li>Await success response via delegate callbacks.</li>
<li>After a successful server request, access the retrieved game items via the getGameItems().</li>
</ul>
<div class="fragment"><pre class="fragment"> <span class="comment">// Create an instance of the GameItemsController</span>
 GameItemsController gameItemsController = <span class="keyword">new</span> GameItemsController(observer);
 
 <span class="comment">// filter list of game-items available for current game version:</span>
 gameItemsController.setGameVersion(Session.getCurrentSession().getGame().getVersion());
 
 <span class="comment">// call loadGameItems</span>
 gameItemsController.loadGameItems();
</pre></div><p>Await the successful call via the observer methods, such as:</p>
<div class="fragment"><pre class="fragment"> <span class="comment">//A standard delegate callback</span>
 <span class="keyword">public</span> <span class="keywordtype">void</span> requestControllerDidReceiveResponse(RequestController aRequestController) {
 
 <span class="comment">//Additional code here</span>
 ...
 }
</pre></div><p>After notification of a successful server request, access the list of activities retrieved.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">//Access the list.</span>
 List&lt;GameItem&gt; = gameItemsController.getGameItems();
</pre></div><p><b> 3. Downloading a GameItem </b></p>
<p>Before a GameItem can be downloaded, the gameItem should be owned by the player either by:</p>
<ul>
<li>submitting the ownership in case of a free item or</li>
<li>purchasing the item.</li>
</ul>
<p>Once the gameItem is owned, the game item may be downloaded.</p>
<p>1. Set ownership on a free GameItem:</p>
<p>The steps required to set the Ownership on a free item are:</p>
<ul>
<li>From the list of game items in the GameItems array, select the item to be downloaded.</li>
<li>Mark the item as owned by calling the method submitOwnership() on the GameItemController.</li>
</ul>
<div class="fragment"><pre class="fragment"> GameItem gameItem ; 
 
 <span class="comment">// mark it as owned:</span>
 GameItemController gameItemController = <span class="keyword">new</span> GameItemController(observer);
 gameItemController.setGameItem(gameItem);
 gameItemController.submitOwnership();
</pre></div><p>2. Purchase a non-free GameItem:</p>
<p>The following steps need to be done:</p>
<ul>
<li>From the list of game items in the GameItems array, select the item to be downloaded.</li>
<li>Use a PaymentMethodsController to load the PaymentMethods for the GameItem</li>
<li>Let the user choose one of the provided PaymentMethods</li>
<li>call PaymentProviderController.getPaymentProviderController() to get the PaymentProviderController for that PaymentMethod</li>
<li>call checkout() on the PaymentProviderController to start the checkout process</li>
<li>You will receive a callback on the PaymentObserver you provided.</li>
</ul>
<div class="fragment"><pre class="fragment"> <span class="comment">//select the game item to be downloaded</span>
 GameItem gameItem = selectNonFreePurchasableGameItem(gameItemsController.getGameItems()); <span class="comment">// or let the user to select it</span>
 
 <span class="comment">// load available payment methods for the selected item:</span>
 PaymentMethodsController paymentMethodsController = <span class="keyword">new</span> PaymentMethodsController(observer);
 paymentMethodsController.setGameItem(gameItem);
 paymentMethodsController.loadPaymentMethods();
 
 <span class="comment">// wait for load completed...</span>
 
 <span class="comment">// make a purchase order:</span>
 PaymentMethod method = paymentMethodsController.getPaymentMethods().get(0); <span class="comment">// here, let the user select!</span>
 PaymentProviderController paymentProviderController = PaymentProviderController.getPaymentProviderController(observer, method.getPaymentProvider());
 
 <span class="comment">// and start the checkout</span>
 Activity currentActivity = null; <span class="comment">// grab the current activity of the application, shouldn&#39;t be null!</span>
 Money price = Money.getPrefered(method.getPrices(), Locale.getDefault(), <span class="stringliteral">&quot;EUR&quot;</span>); <span class="comment">// or let the user to select it!</span>
 paymentProviderController.checkout(currentActivity, gameItem, price);
 
 <span class="comment">// wait for payment completion or use the PendingPaymentProcessor to register observer for pending notifications</span>
</pre></div><p>3. Get the downloadUrl for an owned GameItem (free or purchased) and download it.</p>
<ul>
<li>Call the loadGameItemDownloadUrl() method of IGameItemController to request the download url, from where to download the game item. Please note here that the download url that you recieve would be only valid for 5 mins and within that time, the game item needs to be downloaded.</li>
<li>Wait until server makes the game-item publicly available via CDN.</li>
<li>Download the content using HTTP.</li>
</ul>
<div class="fragment"><pre class="fragment"> GameItemController gameItemController = <span class="keyword">new</span> GameItemController(observer);
 <span class="comment">//gameItem is the selected game item that has been purchased or owned.</span>
 gameItemController.setGameItem(gameItem);
 
 <span class="comment">// get the download url</span>
 gameItemController.loadGameItemDownloadUrl();
 
 <span class="comment">// wait until server makes the game-item publicly available via CDN:</span>
 
 <span class="comment">// download the content using HTTP under given URL:</span>
 <span class="comment">// check that the download URL is not NULL before calling downloadContent </span>
 byte[] content = downloadContent(gameItemController.getGameItem().getDownloadUrl());
</pre></div> </div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../main.html">Scoreloop CoreSocial SDK for Android</a>      </li>
      <li class="navelem"><a class="el" href="../../db/d8c/coresocial-integration.html">Integration Guides</a>      </li>
<hr size="1"/><address style="text-align: right;"><small>
Generated on <!-- Mon Apr 30 2012 13:47:08 --> Mon Apr 30 2012 for ScoreloopCore <img src="scoreloop.png" height="50" />
</body>
</html>
