<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ScoreloopUI: Game Items (Virtual Goods)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ScoreloopUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d6/dee/scoreloopui-integratevg.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Game Items (Virtual Goods) </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Game Items are virtual goods defined by game developers and distributed through Scoreloopʼs Infrastructure.</p>
<p>They can carry binary data as a form of downloadable content. Game developers can offer Game Items to users for free, purchasable through In App purchases for real money or in-game currency.</p>
<p>ScoreloopUI lets you load a Game Items view that:</p>
<ul>
<li>displays the list of game items available in your game,</li>
<li>displays differently the free items, the items that can be purchased though in-game currency and items that have already been purchased by the user,</li>
<li>lets you navigate to the payment methods to make the actual payments.</li>
</ul>
<table  border="0">
<tr>
<td><div align="center">
<img src="../../GameItemsView.png" alt="GameItemsView.png"/>
</div>
  </td></tr>
<tr>
<td><em>The Game Items View</em></td></tr>
</table>
<p>Clicking on one of the purchase-able game items would lead the player to the Payment Methods view from which he could select a Payment Method to make the payment.</p>
<table  border="0">
<tr>
<td><div align="center">
<img src="../../PurchaseView.png" alt="PurchaseView.png"/>
</div>
  </td></tr>
<tr>
<td><em>The Payment Methods View</em></td></tr>
</table>
<p>To integrate Game items in your game you will need to:</p>
<ol type="1">
<li>Configure the game items on <a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a></li>
<li>Modify the scoreloop.properties file to enable Game Items.</li>
<li>Implement the Scoreloop Entry Screen from which the Shop view can be accessed.</li>
<li>Modify the Android Manifest so that it correctly references the ScoreloopUI activities used in integrating Game Items.</li>
<li>If you do not wish to implement the Scoreloop Entry Screen you must explicitly invoke the GameItems view or Payments view from elsewhere in your application.</li>
<li>Implement the payment observer to monitor the callbacks received.</li>
</ol>
<p>The sections below describe how to go about this.</p>
<h2><a class="anchor" id="scoreloopui-configure"></a>
Configure the Game Items</h2>
<p>All downloadable content for your game must be configured through Scoreloopʼs Developer website (<a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a>). Developers can choose to configure an item of downloadable content and upload content for the item to be downloaded by users.</p>
<p>To make use of game items in your game, you first need to setup your content on <a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a> . In your Game account, there is a menu called 'Game Items', navigate to that page. You need to then select “create game item” and there you will need to enter the name of your game Item, a short description of it, optionally some text based metadata, tags etc. You can upload your content for the game item in the Data field. Please note that you need to specify the Price tier as free, or the appropriate ones (payable through google or in-game currency). Once you have entered the details, click on Create Item and the game item will be created for you. You are free to configure multiple game Items in your game.</p>
<p>Once you have created the game Items, you can see the list of game Items created in your game. Next to each game-item, there is a button "Images" and there, you can actually add images for your game-items.</p>
<h2><a class="anchor" id="scoreloopui-properties"></a>
Modifying the scoreloop.properties file</h2>
<p>If your game supports game items whcih may be purchased. You will need to enable the payments feature by adding the following line of code to the scoreloop.properties <a href="file:">file:</a></p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> ui.feature.payment = <span class="keyword">true</span>
</pre></div> </td></tr>
</table>
<p>The "Game Items" view is then directly accessible from the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a>. <br/>
</p>
<h2><a class="anchor" id="scoreloopui-explicitinvocationgameitem"></a>
Explicit invocation of the Game Items View</h2>
<p>This view is accessible from the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a> but in many cases, developers would want to explicitly launch this view from elsewhere in their games. For those who require this, the code example below shows how to go about doing this.</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> <span class="comment">//You should replace button_gameitems with the appropriate id name from your project</span>
 <span class="keyword">final</span> Button GameItemsButton = (Button) findViewById(R.id.button_gameitems);
 
 GameItemsButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() 
 {
 
    @Override
    <span class="keyword">public</span> <span class="keywordtype">void</span> onClick(<span class="keyword">final</span> View v) 
    {
        <span class="keyword">final</span> Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, GameItemsScreenActivity.class);

        <span class="comment">// chose mode here from MODE_GAME_ITEM or MODE_COIN_PACK, default is MODE_GAME_ITEM</span>
        intent.putExtra(GameItemsScreenActivity.MODE, GameItemsScreenActivity.MODE_GAME_ITEM);

        startActivity(intent);
    }
 });
</pre></div> </td></tr>
</table>
<p>When explicitly invoking the Game Items view, you will need to update the Android Manifest so that it includes the Game Items related activities and also references the GameItemsScreenActivity. To do this, add the following lines to the AndroidManifest.xml in your project:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.AbstractCheckoutListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.GameItemGridActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.GameItemHeaderActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PaymentHeaderActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PaymentMethodListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PriceListActivity&quot;</span>/&gt;
 
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.GameItemsScreenActivity&quot;</span> android:theme=<span class="stringliteral">&quot;@android:style/Theme.Black.NoTitleBar.Fullscreen&quot;</span>/&gt;
</pre></div> </td></tr>
</table>
<h2><a class="anchor" id="scoreloopui-explicitinvocationpaymentview"></a>
Explicit invocation of the Payment Methods View</h2>
<p>This view is accessible from the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a> or via the buy option in the <a class="el" href="../../d6/dee/scoreloopui-integratevg.html">Game Items Screen</a> but in many cases, developers would want to explicitly launch this view from elsewhere in their games. For those who require this, the code example below shows how to go about doing this.</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> <span class="comment">//You should replace button_gameitems with the appropriate id name from your project</span>
 <span class="keyword">final</span> Button unlockButton = (Button) findViewById(R.id.button_unlock);
 
 unlockButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {
 
 @Override
 <span class="keyword">public</span> <span class="keywordtype">void</span> onClick(<span class="keyword">final</span> View v) 
 {
    <span class="keyword">final</span> Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, PaymentScreenActivity.class);
 
    intent.putExtra(PaymentScreenActivity.GAME_ITEM_ID, UNLOCK_GAME_ITEM_ID);
 
    startActivity(intent);
 }
 });
</pre></div> </td></tr>
</table>
<p>When explicitly invoking the Payments Methods view, you will need to update the Android Manifest so that it includes the payment related activities and also references the PaymentScreenActivity. To do this, add the following lines to the AndroidManifest.xml in your project:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.AbstractCheckoutListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.GameItemGridActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.GameItemHeaderActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PaymentHeaderActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PaymentMethodListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.payment.PriceListActivity&quot;</span>/&gt;
 
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.PaymentScreenActivity&quot;</span> android:theme=<span class="stringliteral">&quot;@android:style/Theme.Black.NoTitleBar.Fullscreen&quot;</span>/&gt;
</pre></div> </td></tr>
</table>
<h2><a class="anchor" id="scoreloopui-paymentrequestobserver"></a>
Implementing the payment observer</h2>
<p>When payment related requests are done, the respective callback methods are called.</p>
<p>OnPaymentChangedObserver needs to be implemented to monitor the callbacks recieved, you will have to write a class that implements the OnPaymentChangedObserver. The OnPaymentChangedObserver receives notifications about payment process state changes. See the accompanying API documentation for more details.</p>
<p>Typical code sample on how the OnPaymentChangedObserver would look like is the following:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> <span class="keyword">private</span> <span class="keyword">class </span>OnPaymentControllerObserverImpl <span class="keyword">implements</span> OnPaymentChangedObserver {
 
    @Override
    <span class="keyword">public</span> <span class="keywordtype">int</span> onPaymentChanged(GameItem gameItem, <span class="keywordtype">int</span> resultCode,
    <span class="keywordtype">boolean</span> wasPendingPayment) {
 
        <span class="keywordflow">switch</span> (resultCode) {
            <span class="keywordflow">case</span> PaymentScreenActivity.RESULT_ALREADY_PURCHASED:
            <span class="keywordflow">case</span> PaymentScreenActivity.RESULT_OK:
            ScoreloopManagerSingleton.get().getGameItemDownloadUrl(gameItem.getIdentifier(), <span class="keyword">new</span> Continuation&lt;String&gt;() {
 
            @Override
            <span class="keyword">public</span> <span class="keywordtype">void</span> withValue(String url, Exception error) {
                <span class="keywordflow">if</span> (error == null &amp;&amp; url != null) {
                    <span class="comment">// download purchased game item using this url</span>
                }
            }
            });
 
            <span class="keywordflow">break</span>;
 
            <span class="keywordflow">case</span> PaymentScreenActivity.RESULT_PAYMENT_FAILED:
            <span class="comment">// handle situation that payment failed</span>
            <span class="keywordflow">break</span>;
 
            <span class="keywordflow">case</span> PaymentScreenActivity.RESULT_PAYMENT_PENDING:
            <span class="comment">// handle situation when payment is in progress</span>
            <span class="keywordflow">default</span>:
            <span class="keywordflow">break</span>;
        }
 
        <span class="keywordflow">return</span> PaymentScreenActivity.VIEW_FLAGS_SHOW_TOASTS;
    }           
 }
</pre></div> </td></tr>
</table>
<p>For details on Payment Methods, please refer to <a class="el" href="../../df/d07/scoreloopui-integratepayments.html">Payment Methods </a> </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../main.html">ScoreloopUI for Android</a>      </li>
      <li class="navelem"><a class="el" href="../../d1/dfc/scoreloopui-integrationguide.html">Integration Guide</a>      </li>
      <li class="navelem"><a class="el" href="../../d3/dc2/scoreloopui-advancedintegration.html">Advanced Integration</a>      </li>
<hr size="1"/><address style="text-align: right;"><small>
Generated on <!-- Mon Apr 30 2012 13:48:06 --> Mon Apr 30 2012 for ScoreloopUI</small><img src="scoreloop.png" height="50" /></address>
</body>
</html>
