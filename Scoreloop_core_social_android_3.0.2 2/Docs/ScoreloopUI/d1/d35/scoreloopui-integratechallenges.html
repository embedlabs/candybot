<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ScoreloopUI: Challenges</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ScoreloopUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d1/d35/scoreloopui-integratechallenges.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Challenges </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><table  border="0" width="900" align="justify">
<tr>
<td><p class="starttd"></p>
<p>A Scoreloop challenge is where two players compete against each other to win a prize of in-game currency. The <a class="el" href="../../dc/d80/scoreloopui-challengesdesc.html">Challenges Description</a> has more details about how Scoreloop challenges work. To integrate challenges in ScoreloopUI you need to:</p>
<ol type="1">
<li>Modify the scoreloop.properties file to enable challenges. It will then be accessible via the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a>.</li>
<li>If you choose not to integrate the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a> then you will have to explicitly invoke the "Challenges"<br/>
 view. An example of how to do this is shown below.</li>
<li>You must modify the AndroidManifest.xml so that it references the ScoreloopUI challenges activity.<br/>
 An example of what to do is shown below.</li>
<li>You must write classes that implement the <a class="el" href="../../df/d1d/interfacecom_1_1scoreloop_1_1client_1_1android_1_1ui_1_1_on_can_start_game_play_observer.html">OnCanStartGamePlayObserver</a> and <a class="el" href="../../da/d29/interfacecom_1_1scoreloop_1_1client_1_1android_1_1ui_1_1_on_start_game_play_request_observer.html">OnStartGamePlayRequestObserver</a> classes.<br/>
 These observers receive notifications from Scoreloop regarding challenges. Examples of how to implement these classes are given below.</li>
<li>You can optionally set a time limit on how long a challenge will remain valid.<br/>
 To do this, you must visit <a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a> . Details of what to do are given below.</li>
</ol>
<table  align="left">
<tr>
<td><div align="center">
<img src="../../challengesview.png" alt="challengesview.png"/>
</div>
  </td></tr>
<tr>
<td><em>The Challenges View</em> </td></tr>
</table>
<p><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="challengemanifest"></a>
Modifying scoreloop.properties and the Android Manifest</h2>
<p>To integrate the "Challenges" view into your game application, all you need to do is enable the challenges feature by adding the following line<br/>
 of code to the scoreloop.properties <a href="file:">file:</a> </p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> ui.feature.challenge = <span class="keyword">true</span>
</pre></div> </td></tr>
</table>
<p>The "Challenges" view is then directly accessible from the <a class="el" href="../../da/d84/scoreloopui-integrateentryscreen.html">Scoreloop Entry Screen</a>. <br/>
</p>
<h2><a class="anchor" id="explicit-invocation-challenges"></a>
Explicit invocation of the Challenges View</h2>
<p>In most cases it will be unnecessary for developers to explicitly launch the view from elsewhere in their games. However, for those who require this,<br/>
 the code example below shows how to go about doing this. <br/>
</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"><span class="comment">//You should replace button_challenges with the appropriate id from your game project</span>
<span class="keyword">final</span> Button challengesButton = (Button) findViewById(R.id.button_challenges);

challengesButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {
      
        @Override
        <span class="keyword">public</span> <span class="keywordtype">void</span> onClick(<span class="keyword">final</span> View v) {

             startActivity(<span class="keyword">new</span> Intent(<span class="keyword">this</span>, ChallengesScreenActivity.class));

        }
});
</pre></div> </td></tr>
</table>
<p>When explicitly invoking the challenges view, you must make sure that the Android Manifest includes the Challenge related activities and references the ScoreloopUI ChallengesScreenActivity correctly. To do this, add the following lines to the manifest:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.challenge.ChallengeHeaderActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.challenge.ChallengeListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.challenge.ChallengeAcceptListActivity&quot;</span>/&gt;
 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.component.challenge.ChallengeCreateListActivity&quot;</span>/&gt;

 &lt;activity android:name=<span class="stringliteral">&quot;com.scoreloop.client.android.ui.ChallengesScreenActivity&quot;</span> android:theme=<span class="stringliteral">&quot;@android:style/Theme.Black.NoTitleBar.Fullscreen&quot;</span>/&gt;
</pre></div> </td></tr>
</table>
<p><br/>
<br/>
<br/>
</p>
<h2><a class="anchor" id="oncanobserver"></a>
The OnCanStartGamePlayObserver</h2>
<p>The <a class="el" href="../../df/d1d/interfacecom_1_1scoreloop_1_1client_1_1android_1_1ui_1_1_on_can_start_game_play_observer.html">OnCanStartGamePlayObserver</a> receives notifications and callbacks before a Scoreloop challenge is started or accepted, and returns a boolean<br/>
 value indicating whether the gameplay can start or not. For example, if a normal game is currently underway, a developer might choose to dismiss<br/>
 the request to start a new challenge. See the accompanying API documentation for more details. You will need to write a class that implements this<br/>
 observer and also implement its callback method <a class="el" href="../../">onCanStartGamePlay()</a>. You should note that the method will normally be implemented within the<br/>
 game, (that is within the application itself). The following code gives an example of how the method might be implemented:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"><span class="comment">//The delegate callback</span>
<span class="keyword">public</span> <span class="keywordtype">boolean</span> onCanStartGamePlay() {

     <span class="comment">//the method simply returns a specific policy chosen by the developer</span>
     <span class="keywordflow">return</span> policy();
}

<span class="comment">//The policy that will be executed</span>
<span class="keyword">private</span> <span class="keywordtype">boolean</span> policy() {

  <span class="comment">// If a normal game is currently underway, we choose to keep it and</span>
  <span class="comment">// to reject the request to start a challenge</span>
  <span class="keywordflow">if</span> (_gamePlaySessionStatus == GamePlaySessionStatus.NORMAL) {

          <span class="keywordflow">return</span> <span class="keyword">false</span>;

  } <span class="keywordflow">else</span> {

          <span class="keywordflow">return</span> <span class="keyword">true</span>;
  }
}
</pre></div> </td></tr>
</table>
<p><br/>
<br/>
<br/>
 </p>
<h2><a class="anchor" id="onstartobserver"></a>
The OnStartGamePlayRequestObserver</h2>
<p>The <a class="el" href="../../da/d29/interfacecom_1_1scoreloop_1_1client_1_1android_1_1ui_1_1_on_start_game_play_request_observer.html">OnStartGamePlayRequestObserver</a> receives notifications when a challenge is started or accepted. You will have to write a class that implements<br/>
 this observer and that implements its <a class="el" href="../../">onStartGamePlayRequest(Integer)</a> method. The following code shows an example of how this might be done:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"><span class="comment">//The callback method</span>
<span class="keyword">public</span> <span class="keywordtype">void</span> onStartGamePlayRequest(<span class="keyword">final</span> Integer mode) {
  
   <span class="comment">//This example sets the game status as being in a &quot;challenge&quot;</span>
   SLDemoUIApplication.setGamePlaySessionStatus(SLDemoUIApplication.GamePlaySessionStatus.CHALLENGE);
   
   <span class="comment">//The method also sets the challenge mode. </span>
   <span class="comment">//If the game does not support modes this step is not needed.</span>
   SLDemoUIApplication.setGamePlaySessionMode(mode);  <span class="comment">// in case of no modes in the game, this is not needed</span>

   <span class="comment">//The method starts a new GamePlayActivity</span>
   startActivity(<span class="keyword">new</span> Intent(<span class="keyword">this</span>, GamePlayActivity.class));
}
</pre></div> </td></tr>
</table>
<h2><a class="anchor" id="configuringchallenges"></a>
Configuring Challenges on https://developer.scoreloop.com</h2>
<p>You can configure the length of time for which challenges will remain valid and after which they will expire. To do this, go to <a href="https://developer.scoreloop.com">https://developer.scoreloop.com</a> and<br/>
 navigate to the "Game Properties" section. From there you can set the maximum number of hours that open, direct, and invited challenges will remain valid.</p>
<table class="doxtable">
<tr>
<td><div align="center">
<img src="../../challengeconfigure.png" alt="challengeconfigure.png"/>
</div>
 </td></tr>
</table>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../main.html">ScoreloopUI for Android</a>      </li>
      <li class="navelem"><a class="el" href="../../d1/dfc/scoreloopui-integrationguide.html">Integration Guide</a>      </li>
      <li class="navelem"><a class="el" href="../../d3/dc2/scoreloopui-advancedintegration.html">Advanced Integration</a>      </li>
<hr size="1"/><address style="text-align: right;"><small>
Generated on <!-- Mon Apr 30 2012 13:48:05 --> Mon Apr 30 2012 for ScoreloopUI</small><img src="scoreloop.png" height="50" /></address>
</body>
</html>
