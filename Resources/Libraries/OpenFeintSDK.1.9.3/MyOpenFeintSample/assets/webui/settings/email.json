{"title":"Email","scrolling":true,"loadflow":"","init":"\n$('body').addClass('textured');$('#subheader').text(OF.page.title);if(OF.user.email){$('.current_info').removeClass('hidden');$('.current_info .value').text(OF.user.email);}\n$('#change_email_form').submit(function(){if($(this).isLoading())return false;if($('#change_email_form').isFormFilled('Enter your current password and your new email address to continue.')){$(this).isLoading(true);var newEmail=$('#user_http_basic_credential_attributes_email').val();OF.api.request('/xp/users/'+OF.user.id,{method:'PUT',loader:'#submit',params:{password:$('#password').val(),user:{http_basic_credential_attributes:{email:newEmail}}},success:function(){OF.goBack();OF.alert('Success','You have changed your email to: '+newEmail);},failure:function(data){if(data.exception){if(data.exception['class']=='PlayerNotAuthenticated'){OF.alert('Error','Your current password was not correct.');}else{return false;}}else{return false;}},complete:function(){$('#change_email_form').isLoading(false);}});}\nreturn false;});$('#submit').touch(function(){$('#change_email_form').submit();});","resume":"","appear":"","html":"<div id='settings'>\n<div id='header'>Settings</div>\n<div id='subheader'></div>\n<div class='current_info'>\n<div class='label'>Current Email Address</div>\n<div class='value'></div>\n</div>\n<form id='change_email_form'>\n<div class='input_field'>\n<label>Current Password</label>\n<input id='password' name='password' type='password'>\n</div>\n<div class='input_field'>\n<label>New Email Address</label>\n<input id='user_http_basic_credential_attributes_email' name='user[http_basic_credential_attributes][email]' type='text'>\n</div>\n<div class='button' id='submit'>Okay</div>\n</form>\n\n</div>\n"}