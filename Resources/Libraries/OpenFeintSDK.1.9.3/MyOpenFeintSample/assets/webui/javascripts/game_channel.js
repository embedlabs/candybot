
OF.device.ios4_0_x=/iPhone.*4\.0.*/.test(OF.device.os);OF.barButtonTouch=function(){OF.trackEvent('game_channel','dashboard_button');if(OF.user&&OF.user.id){OF.action('dashboard');}else{OF.action('showEnableView',{message:"Join the OpenFeint Community!",button:"Sign me up!"});}};OF.api.handleDisconnect=function(){OF.action('reload');};OF.appStore=function(gameId){OF.action('openMarket',{url:OF.serverUrl+'client_applications/'+gameId+'/buy_now'+'?user_id='+(OF.user.id?OF.user.id:'')+'&ga_id='+OF.GA.cookie.id});};OF.tapjoy=(function(){var params={udid:OF.device.identifier,device_type:OF.device.hardware,os_version:U.last(OF.device.os.split(' ')),app_id:'00b2897c-eadf-4ac6-a69b-701ca6734214',app_version:OF.game.version,library_version:'7.4.0',country_code:'US',language_code:'en',lad:'0',};var sendReq=function(reqParams){var tapJoyReq=new Image();tapJoyReq.src='https://ws.tapjoyads.com/connect?'+$.urlEncode(reqParams);};return{install:function(){sendReq(params);},action:function(){var actionParams=U.clone(params);actionParams.app_id='7f2d2441-626a-4755-983c-5ece2809c015';sendReq(actionParams);}}}());(function($){$.fn.swipeIt=function(options){var el=this;var offset=el.offset();var s={currentSlideIndex:0,currentSlideOffsetX:0,direction:null,dx:null,eventTypeStart:null,eventTypeMove:null,eventTypeEnd:null,i:null,lastSlideIndex:null,moveX:null,positionX:null,slideWidth:null,touchStartX:null,transition:null,startSwipeTime:null,endSwipeEndTime:null,swipeDuration:null,swipeSpeed:null,indicator:true,screenshotsOffset:null,preventScrollY:false};s=(options)?$.extend(s,options):s;s.eventTypeStart=(OF.isDevice)?'touchstart':'mousedown';s.eventTypeMove=(OF.isDevice)?'touchmove':'mousemove';s.eventTypeEnd=(OF.isDevice)?'touchend':'mouseup';$(el).bind(s.eventTypeStart,function(){var sd=new Date();s.startSwipeTime=sd.getTime();swipeEvent(this);});var slideIndicatorWidth=0;if(s.indicator==true){$(el).children().each(function(index){var elClass=(s.currentSlideIndex==index)?elClass='current':elClass='';$('.slide_indicator').append('<li class='+elClass+'></li>');slideIndicatorWidth=slideIndicatorWidth+16;});$('.slide_indicator').css({'margin-left':-($('.slide_indicator').width()/2)});}
$('.slide_indicator').css({'margin-left':-(slideIndicatorWidth/2)+'px'});var indicateCurrentIndicator=function(){if(s.indicator==true){$(".slide_indicator").children().removeClass('current');$(".slide_indicator li:eq("+s.currentSlideIndex+")").addClass('current');}};var swipeEvent=function(el){s.currentSlideOffsetX=s.currentSlideIndex*-(s.slideWidth);s.slideWidth=$(el).children().outerWidth(true);s.lastSlideIndex=$(el).children().size()-1;s.touchStartX=(OF.isDevice)?event.touches[0].pageX:event.pageX;s.touchStartY=(OF.isDevice)?event.touches[0].pageY:event.pageY;var cancelTouch=function(){if(OF.isDevice){$(el).unbind('touchmove');$(el).unbind('touchend');}else{$(el).unbind('mousemove');$(el).unbind('mouseup');}};$(el).bind(s.eventTypeMove,function(){s.dx=0;s.moveX=(OF.isDevice)?event.touches[0].pageX:event.pageX;s.moveY=(OF.isDevice)?event.touches[0].pageY:event.pageY;s.dy=s.moveY-s.touchStartY;s.dx=s.moveX-s.touchStartX;s.transition='-webkit-transform 0s ease-in-out';s.positionX=(s.currentSlideOffsetX+s.dx);s.positionY=(s.currentSlideOffsetY+s.dy);if(s.preventScrollY){event.preventDefault();}else{if(Math.abs(s.dx)>50){event.preventDefault();s.screenshotsOffset=(OF.device.ios4_0_x)?$('#screenshots').offset().top-=window.scrollY:$('#screenshots').offset().top;if(s.screenshotsOffset===$(window).scrollTop()){event.preventDefault();$('body').scrollTop(s.screenshotOffset);}
$(el).css({'-webkit-transition':s.transition,'-webkit-transform':'translate3d('+s.positionX+'px, 0 ,0)'});}}});$(el).bind(s.eventTypeEnd,function(){if(!s.preventScrollY){if(Math.abs(s.dx)>50){s.screenshotsOffset=(OF.device.ios4_0_x)?$('#screenshots').offset().top-=window.scrollY:$('#screenshots').offset().top;$('body').scrollTop(s.screenshotsOffset);}}
var ed=new Date();s.endSwipeTime=ed.getTime();s.swipeDuration=s.endSwipeTime-s.startSwipeTime;s.swipeSpeed=(s.swipeDuration*0.002).toFixed(2);s.swipeSpeed=(s.swipeSpeed>0.25)?0.25:(s.swipeDuration*0.002).toFixed(2);if(s.direction==null){s.direction=s.dx;event.preventDefault();}
if(Math.abs(s.dx)>1){s.direction=s.dx>0?'right':'left';}
if(s.direction=='left'){if(s.currentSlideIndex==s.lastSlideIndex){s.transition='-webkit-transform 0s ease-in-out';s.positionX=s.lastSlideIndex*s.slideWidth;s.dx=null;}else{s.i=1;}}
if(s.direction=='right'){if(s.currentSlideIndex==0){s.transition='-webkit-transform 0s ease-in-out';s.positionX=0;s.dx=null;}else{s.i=-1;}}
if(Math.abs(s.dx)>Math.abs(s.slideWidth*.25)){s.transition='-webkit-transform '+s.swipeSpeed+'s '+'ease-in-out';s.positionX=(s.currentSlideIndex+s.i)*s.slideWidth;s.currentSlideIndex=s.currentSlideIndex+s.i;}else{s.transition='-webkit-transform '+s.swipeSpeed+'s '+'ease-in-out';s.positionX=s.currentSlideIndex*s.slideWidth;}
$(el).css({'-webkit-transition':s.transition,'-webkit-transform':'translate3d('+-(s.positionX)+'px, 0 ,0)'});indicateCurrentIndicator();cancelTouch();});}};})(jQuery);(function($){$.fn.countDownOld=function(options){var endHour=(options&&options.endHour)||24;var el=this;var intervalID=setInterval(function(){var now=new Date();var end=new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate());end.setUTCHours(endHour,00,0);if(now>end)end.setDate(end.getDate()+1);var nowInMilliseconds=now.getTime();var endInMilliseconds=end.getTime();var millsecondsTillEnd=(endInMilliseconds-nowInMilliseconds);var hoursTillEnd=Math.floor(millsecondsTillEnd/3600000);var minTillEnd=Math.floor(59-now.getMinutes());var secondsTillEnd=(59-now.getSeconds());secondsTillEnd=(secondsTillEnd<10?'0':'')+secondsTillEnd;$(el).html(hoursTillEnd+'h '+minTillEnd+'m '+secondsTillEnd+'s');},1000);}})(jQuery);OF.getTemperature=function(vote_target,vote_count,votes_bubble){$('.thermometer .mercury').width(0);maxWidth=$('.thermometer').width()-9;var x=vote_target/vote_count;var temperature=maxWidth/x;temperatureSpeed=1500/x;$('.thermometer .mercury').animate({width:temperature},temperatureSpeed,function(){if(votes_bubble){var exclamation=(vote_count==vote_target)?"!":'';$('.ammount span').text(addCommas(vote_count)+" votes"+exclamation);if(vote_count>vote_target-(vote_target*.25)){$('.ammount').css({'left':(temperature-54)+'px','font-weight':'bolder'}).unhide();$('.ammount span').css('color','#ea2929');$('.ammount .indicator').css({'left':'61px'})}else if(vote_count<vote_target*.25){$('.ammount').css({'left':(temperature+9)+'px','font-weight':'bolder'}).unhide();$('.ammount .indicator').css({'left':'-2px'})}else{$('.ammount').css({'left':(temperature-22)+'px','font-weight':'bolder'}).unhide();}}else{var exclamation=(vote_count==vote_target)?"!":'';$('.thermometer .mercury').text(addCommas(vote_count)+" votes"+exclamation);}});};OF.gcTime={timerID:null,totalSecsTillEnd:0,cleanTime:function(ISO8601){return $.trim(ISO8601.replace(/-/g,"/").replace(/[TZ]/g," "));},formatTimeLeft:function(tL){var r=(tL.hours/24);var t=' Days';if(tL.hours<48){r=tL.hours;t=' Hours';if(tL.hours<2){var r=(tL.hours*60)+tL.minutes;t=' min';}}
return{time:parseInt(r),type:t};},secondsToHoursMinutes:function(totalSecsTillEnd){if(!totalSecsTillEnd){totalSecsTillEnd=null;}else{this.totalSecsTillEnd=totalSecsTillEnd;}
if(this.totalSecsTillEnd>0){var totalSecsTillEnd=this.totalSecsTillEnd;var now=new Date();var hoursTillEnd=Math.floor(totalSecsTillEnd/3600);var hoursTillEndInSecs=(hoursTillEnd*3600);var secsTillEndLeft=(totalSecsTillEnd-hoursTillEndInSecs);var minTillEnd=Math.floor(secsTillEndLeft/60);var minTillEndLeftInSecs=(minTillEnd*60);var secsTillEnd=Math.floor(secsTillEndLeft-minTillEndLeftInSecs);if(totalSecsTillEnd<=-1){OF.stop();}else{timeRemaining={hours:hoursTillEnd,minutes:minTillEnd,seconds:secsTillEnd}}}
return timeRemaining;}};Date.prototype.abbrMonths=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];Date.prototype.DaysOfTheWeek=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];function addCommas(nStr){nStr+='';x=nStr.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;}