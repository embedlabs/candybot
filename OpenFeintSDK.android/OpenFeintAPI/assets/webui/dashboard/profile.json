{"title":"","scrolling":true,"loadflow":"var localUserLoaded, localUserReq;\nOF.GA.setAccount('UA-3107048-21', 'spotlight.android.openfeint.com');\n$.loadScript('dashboard/dashboard');\nif ((typeof jasmine !== \"undefined\" && jasmine !== null) && OF.isBrowser) {\n  $.loadCss('settings/spec');\n}\nlocalUserLoaded = localUserReq = null;\nOF.loadLocalUser = function() {\n  if (OF.user.isLoaded) {\n    return typeof localUserLoaded === \"function\" ? localUserLoaded() : void 0;\n  } else {\n    return localUserReq || (localUserReq = OF.api(\"/xp/users/me\", {\n      success: function(userData) {\n        OF.user = userData.user;\n        OF.user.isLoaded = true;\n        if (typeof localUserLoaded === \"function\") {\n          localUserLoaded();\n        }\n        return localUserLoaded = localUserReq = null;\n      }\n    }));\n  }\n};\nOF.localUserLoaded = function(callback) {\n  if (OF.user.isLoaded) {\n    return callback();\n  } else {\n    return localUserLoaded = callback;\n  }\n};","init":"OF.loadLocalUser();\n$('body').addClass('textured');\n$('.button').pretouch();\n\n// Menu handling functions\nif (!OF.menu) {\n  OF.menu = function(buttonName) {\n    if      (buttonName == 'home')      OF.menu.home();\n    else if (buttonName == 'settings')  OF.menu.settings();\n    else if (buttonName == 'exit')      OF.menu.exit();\n    else {\n      OF.log('Unknown menu button hit: '+ buttonName);\n    }\n  };\n  \n  OF.menu.home = function() {\n    if (OF.navigationStack[0].url.match(/dashboard\\/user/)) {\n      OF.goBack({root:true});\n    } else {\n      \n      // This is a bit of a hack for now...\n      OF.navigateToUrl(\"dashboard/user\", {\n        complete: function() {\n          OF.pages.unshift(OF.pages.pop());\n          OF.action('back', {root:true}, OF.contentLoaded);\n        }\n      });\n    }\n  };\n  \n  OF.menu.settings = function() {\n    OF.sendAction('openSettings');\n  };\n  \n  OF.menu.exit = function() {\n    OF.sendAction('dismiss');\n  };\n}\n\n// Base friends page functions\nif (!OF.friendsList) {\n  OF.friendsList = {\n    init: function() {\n      jQuery.lazyLoad({\n        threshold: 0.5,  //percentage of the window height left to scroll that will trigger the next page\n        nextPageLoaded: function(page, data){ \n          if (page == 1) {\n            OF.friendsList.renderFriends(data);                 \n          } else {\n            OF.friendsList.addFriends(data);         \n          }\n        },\n        nextPageShouldLoad: function(page, callback) {\n          OF.api('/xp/friends', {\n            params: {\n              user_id:   OF.page.user.id,\n              page:      page,\n              page_size: 50\n            },\n            success: function(data) {\n              callback(data.users, data.users.length < 50)\n            },\n            failure: function() { callback([]); }\n          });\n        },\n        isEmpty: function() { OF.friendsList.renderFriends([]); },\n        isFinished: function() { jQuery(\"#loading\").hide(); }\n      });\n    },\n    \n    renderFriendItems: function(friends) {\n      var html = jQuery.map(friends, function(friend) {\n       return tmpl('user_tmpl', friend);\n      });\n      return html;\n    },\n    \n    renderFriends : function(friends) {    \n      var html = OF.friendsList.renderFriendItems(friends);\n      \n      if (html.length > 0) {\n        jQuery('#friends_list > ul').html(html.join('')).unhide();\n        jQuery(\"#friends_list .no_data\").hide();\n      } else {\n        jQuery('#friends_list > ul').hide();\n        jQuery(\"#friends_list .no_data\").unhide();      \n      }\n    },\n    \n    addFriends : function(friends) {    \n      var html = OF.friendsList.renderFriendItems(friends);\n      jQuery('#friends_list > ul').append(html.join(''));\n    }\n  };\n}\n\n// Go home on touching the logo area\n$('#home_button').touch(OF.menu.home);\n$.loadCss('dashboard/profile');\n$.loadScript('dashboard/profile')","resume":"if (OF.page.user.id == OF.user.id) {\n  OF.page.updateStatusInfo(OF.user.status)\n}","appear":"$('#header .title').html(OF.page.title);","disappear":null,"exit":null,"html":"<div id='dashboard'>\n  <div id='header'>\n    <span class='loading'>\n      <span class='spinner'></span>\n    </span>\n    <div class='title' id='home_button'></div>\n  </div>\n            <script type=\"text/plain\" id=\"message_tmpl\">\n              <li class=\"message not_process\">\n    <div class=\"message_wrapper\">\n      <div class=\"left_column\" <%=data_href%>>\n        <div class=\"small_profile_picture\" style=\"<%=style%>\">\n          <div class=\"overlay\"></div>\n        </div>\n      </div>\n      <div class=\"right_column message_action hidden\">\n        <div class=\"delete_message badge_button\">\n          <div class=\"icon_container\">&nbsp;</div>\n        </div>\n      </div>\n      <div class=\"center_column\" data-id=\"<%=id%>\">\n        <p class=\"username\" data-userid=\"<%=user_id%>\" <%=data_href%>>\n          <%=user_name%>\n        </p>\n        <p class=\"detail\">\n          <%=body%>\n        </p>\n        <p class=\"post_date\">\n          posted on\n          <time><%=created_at%></time>\n        </p>\n      </div>\n    </div>\n  </li>\n            </script>\n  <div class='profile_page' id='user_profile'>\n    <div class='user' id='info_cell'>\n      <div class='user_basic'>\n        <div class='user_name'>&nbsp;</div>\n        <div class='user_score_container'>\n          <div class='user_score hidden'></div>\n        </div>\n      </div>\n      <div class='user_info'>\n        <div class='avatar'>\n          <div class='overlay'></div>\n        </div>\n        <div class='status_container bubble hidden'>\n          <div class='status' id='status'></div>\n          <div class='update_status hidden' id='update_status'>\n            Update Status\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='add_friend friend_action hidden' id='add_friend'>\n      <div class='action_button'>\n        <div class='message'>\n          Add Friend\n        </div>\n      </div>\n      <div class='action_info'>\n        <div class='action_info_inner'>\n          Add\n          <span class='user_name'></span>\n          as a friend!\n        </div>\n      </div>\n    </div>\n    <div class='pending_friend friend_action hidden' id='pending_friend'>\n      <div class='action_button disabled'>\n        Pending...\n      </div>\n      <div class='action_info'>\n        <div class='action_info_inner'>\n          Waiting for\n          <span class='user_name'></span>\n          to accept your request.\n        </div>\n      </div>\n    </div>\n    <div class='unblock_user friend_action hidden' id='unblock_user'>\n      <div class='action_button'>\n        Unblock User\n      </div>\n      <div class='action_info'>\n        <div class='action_info_inner'>\n          This user is currently blocked\n        </div>\n      </div>\n    </div>\n    <ul class='game_friend'>\n      <li class='games' id='games'>\n        <div class='badge_button button_container'>\n          <div class='icon'></div>\n          <div class='subtitle'></div>\n        </div>\n      </li>\n      <li class='friends' id='friends'>\n        <div class='badge_button button_container'>\n          <div class='icon'></div>\n          <div class='subtitle'></div>\n          <div class='badge hidden' id='pending_friends'></div>\n        </div>\n      </li>\n    </ul>\n    <ul class='cells wall'>\n      <h4 class='section_title'>\n        Wall\n      </h4>\n      <li class='action_container hidden' id='set_your_name'>\n        <div class='action_button has_maxwidth' id='set_name'>\n          <span>\n            Set Your Feint Name to Comment\n          </span>\n        </div>\n      </li>\n      <li class='no_access_wall hidden' id='blocked_on_wall'>\n        This user has made this wall private.\n      </li>\n      <li class='no_access_wall hidden' id='friend_only_wall'>\n        <span class='user_name'></span>\n        only share's their wall with their friends. Add them as a friend to comment.\n      </li>\n      <li class='no_access_wall hidden' id='view_only_wall'>\n        <span class='user_name'></span>\n        only allows friends to post on the wall. Add them as a friend to post on it.\n      </li>\n      <li class='action_container hidden' id='post_message'>\n        <form>\n          <div class='text_field'>\n            <textarea class='input_area' id='new_message' maxlength='400'></textarea>\n          </div>\n          <div class='action_button has_maxwidth' id='post'>\n            <span>\n              Post Comment\n            </span>\n          </div>\n        </form>\n      </li>\n      <li class='messages_wrapper'>\n        <ul class='messages_container' id='messages_container'></ul>\n      </li>\n      <li class='load_more hidden' id='load_more'>\n        Load More\n      </li>\n    </ul>\n    <div class='more_options hidden' id='more_options'>\n      <h4 class='more_title' id='more_title'>\n        More Options\n      </h4>\n      <ul class='more_action hidden'>\n        <li class='remove_friend hidden' id='remove_friend'>\n          <div class='badge_button button_container'>\n            <div class='icon'></div>\n            <div class='subtitle'>\n              Remove Friend\n            </div>\n          </div>\n        </li>\n        <li class='block_user hidden' id='block_user'>\n          <div class='badge_button button_container'>\n            <div class='icon'></div>\n            <div class='subtitle'>\n              Block User\n            </div>\n          </div>\n        </li>\n        <li class='report_user' id='report_user'>\n          <div class='badge_button button_container'>\n            <div class='icon'></div>\n            <div class='subtitle'>\n              Report User\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n"}