{"title":"Turn Parental Controls On","scrolling":true,"loadflow":null,"init":"$('body').addClass('textured');\n$('#subheader').text(OF.page.title);\nvar pwConfirmField, pwField, validatePassword;\npwField = $('#password');\npwConfirmField = $('#password_confirmation');\nvalidatePassword = function() {\n  if ($.trim(pwField.val()).length < 6) {\n    OF.alert('Invalid Password', 'Password has to be at least 6 characters long.');\n    return false;\n  } else if (pwField.val() !== pwConfirmField.val()) {\n    OF.alert('Invalid Password', \"Password confirmation doesn't match the password. Please re-enter the information.\");\n    return false;\n  } else {\n    return true;\n  }\n};\n$('#submit').touch(function() {\n  return $('#parental_controls_form').submit();\n});\n$('#parental_controls_form').submit(function() {\n  if (!validatePassword()) {\n    return false;\n  }\n  OF.api.post(\"/xp/devices/\" + OF.device.identifier + \"/parental_control\", {\n    params: {\n      parental_control: {\n        password: pwField.val(),\n        password_confirmation: pwConfirmField.val()\n      }\n    },\n    success: function() {\n      OF.device.parentalControls = true;\n      if (OF.action.isSupported('setParentalControlsEnabled')) {\n        OF.action('setParentalControlsEnabled', {\n          parentalControlsEnabled: \"true\"\n        });\n      }\n      return OF.goBack();\n    }\n  });\n  return false;\n});","resume":null,"appear":null,"disappear":null,"exit":null,"html":"<div id='settings'>\n  <div id='header'>\n    Settings\n    <span class='loading'>\n      <span class='spinner'></span>\n    </span>\n  </div>\n  <div id='subheader'></div>\n  <div class='current_info'>\n    <div class='label'>Parental controls will disable all user communication on this device.</div>\n  </div>\n  <form id='parental_controls_form'>\n    <div class='input_field'>\n      <label>Password</label>\n      <input id='password' name='password' type='password'>\n    </div>\n    <div class='input_field'>\n      <label>Password Confirmation</label>\n      <input id='password_confirmation' name='password_confirmation' type='password'>\n    </div>\n    <div class='button' id='submit'>Okay</div>\n  </form>\n</div>\n"}