{"title":"Initializing Open Feint...","scrolling":true,"loadflow":"if (OF.page.params.spotlight) {\n  $('#game_flow').hide();\n  $('#spotlight_flow').unhide();\n  OF.spotlight = true;\n}","init":"$('body').addClass('textured');\n$('#header .loading').hide();\n$('.button').pretouch();\n\nif (OF.page.params.mode == 'switch') {\n  OF.introSwitch = true;\n}\n\nif (OF.introSwitch) {\n  $('.switch_flow').unhide(0);\n  $('.intro_flow').hide();\n}\nif (OF.page.params.for_new_account) {\n  \n  $('#new_account').unhide(0);\n  $('#intro_index .loading').hide();\n  $('.with_decline').hide();\n  // Activiate form submission hanlders\n  $('form').submit(function() {\n    $(this).children('#submit').touch();\n    return false;\n  })\n  \n  // New Account\n  $('#new_account #submit').touch(function() {\n    if (!$('#new_account form').isLoading()) {\n      var name = $('#new_account #user_login').val();\n      \n      if (name.length > 0) {\n        $('#new_account form').isLoading(true);\n        OF.api.request('/xp/users/validate', {\n          loader: '#new_account #submit',\n          params: { name: escape(name) },\n          on404: function(data) {\n            OF.navigateToUrl('intro/new_account', {\n              params: {\n                userName: $('#new_account #user_login').val()\n              }\n            });\n          },\n          on406: function(data) {\n            OF.alert(\"Invalid Username\", $.htmlDecode(data.exception.message));\n          },\n          on409: function(data) {\n            var suggestion = $.htmlDecode(data.username.suggestion);\n            if (confirm('Oops, looks like that user name is already taken. Would you like to continue with \"' + suggestion + '\"?  Remember you can always change it later.')) {\n              $('#new_account #user_login').val(suggestion);\n              $('#new_account form').isLoading(false);\n              $('#new_account #submit').touch();\n            }\n          },\n          failure: function(data, status) {\n            if (!status.match(/^40(4|6|9)/)) {\n              return false;\n            }\n          },\n          complete: function() {\n            $('#new_account form').isLoading(false);\n          }\n        });\n      } else {\n        OF.alert('Enter a name', 'Enter your desired username in the textfield to continue.');\n      }\n    }\n  });\n  \n} else {\n\n  var enableOpenfeintNode = $('#enable_openfeint');\n  var enableOpenfeintFormNode = enableOpenfeintNode.find(\"form\");\n  var enableOpenfeintSubmitNode = $(\"#submit\");\n  var loadingNode = $('#intro_index .loading');\n\n  loadingNode.fadeOut('fast', function() {\n    enableOpenfeintNode.unhide();\n  });\n\n  // New Account\n  enableOpenfeintSubmitNode.touch(function() {\n    // track user click Enable button\n    OF.GA.page(\"/webui/intro/index_trackEnableOpenfeint\");\n    if (!enableOpenfeintFormNode.isLoading()) {\n      enableOpenfeintFormNode.isLoading(true);\n      OF.loader.show();\n      OF.sendAction('createUser', {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        password_confirmation: \"\",\n        callback: function(status, response) {\n          enableOpenfeintFormNode.isLoading(false);\n          if (typeof response === 'string') {\n            response = $.parseJSON(response);\n          }\n          OF.loader.hide();\n          if (status.match(/^2/)) {\n            OF.log('Successfully bootstrapped with new account');\n            OF.sendAction('dismiss');\n          } else {\n            var message = response.exception.message\n              ? $.htmlDecode(response.exception.message)\n              : 'We had an error processing your information.  Ensure it all looks right and try again.';\n            OF.alert('Error', message);\n          }\n        }\n      });\n    }\n  });\n\n  // track user click no thanks button\n  $(\"#decline\").touch(function() {\n    OF.GA.page(\"/webui/intro/index_trackDeclineOpenfeint\");\n    OF.log('user click No thanks button');\n    OF.action('decline');\n  });\n}","resume":null,"appear":null,"disappear":null,"exit":null,"html":"<div id='intro'>\n  <div id='header'>\n    <span class='loading'>\n      <span class='spinner'></span>\n    </span>\n  </div>\n  <div class='content'>\n    <div id='intro_index'>\n      <div class='switch_flow hidden'>\n        <p>Create a new Feint account.</p>\n      </div>\n      <div class='intro_flow'>\n        <div id='game_flow'>\n          <p>\n            You're just one click away from gaming with your friends!\n          </p>\n        </div>\n        <div class='hidden' id='spotlight_flow'>\n          <p>Join the OpenFeint community to connect with friends and other gamers</p>\n        </div>\n        <div class='features'>\n          <div class='feature_row'>\n            <div class='feature' id='leaderboards'>\n              <div class='icon'></div>\n              <div class='title'>\n                Post<br>\n                High Scores\n              </div>\n            </div>\n            <div class='feature' id='friends'>\n              <div class='icon'></div>\n              <div class='title'>\n                Compete<br>\n                With Friends\n              </div>\n            </div>\n            <div class='feature' id='achievements'>\n              <div class='icon'></div>\n              <div class='title'>\n                Earn<br>\n                Achievements\n              </div>\n            </div>\n            <div class='feature' id='games'>\n              <div class='icon'></div>\n              <div class='title'>\n                Discover<br>\n                Games\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class='loading'>\n          <div class='spinner'></div>\n          <span>Loading</span>\n        </div>\n      </div>\n      <div class='hidden' id='enable_openfeint'>\n        <form>\n          <div class='button_row'>\n            <div class='pretty_wide_wrapper'>\n              <div class='button default' id='submit'>\n                <span class='start_openfeint'>Enable & Start Playing!</span>\n              </div>\n            </div>\n          </div>\n        </form>\n        <div class='with_decline'>\n          <div class='button_row'>\n            <div class='button_wrapper'>\n              <div class='button' data-event='intro,decline' id='decline'>\n                No thanks. I don't like fun.\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class='intro_flow'>\n          <div data-href='intro/tos' id='intro_legal'>\n            Game Data will automatically be stored securely on our servers according to our\n            <span data-href='intro/tos'>Terms and Conditions.</span>\n          </div>\n        </div>\n      </div>\n      <div class='hidden' id='new_account'>\n        <form>\n          <div class='input_field'>\n            <label>Feint Name:</label>\n            <input id='user_login' name='user[login]' type='text'>\n          </div>\n          <div class='button default' id='submit'>Create</div>\n        </form>\n        <div class='with_decline'>\n          <div class='button_row'>\n            <div class='button_wrapper'>\n              <div class='button' data-action='decline' data-event='intro,decline'>\n                I don't want<br>\n                to use Feint\n              </div>\n            </div>\n            <div class='button_wrapper'>\n              <div class='button' data-href='intro/login'>\n                I already have<br>\n                a Feint account\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class='without_decline'>\n          <div class='button' data-href='intro/login'>\n            I already have a Feint account\n          </div>\n        </div>\n        <div class='intro_flow'>\n          <div data-href='intro/tos' id='intro_legal'>\n            Game Data will automatically be stored securely on our servers according to our\n            <span data-href='intro/tos'>Terms and Conditions.</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"}