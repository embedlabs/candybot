{"title":"Feint Name","scrolling":true,"loadflow":null,"init":"$('body').addClass('textured');\n$('#subheader').text(OF.page.title);\n$('.current_info .value').text(OF.user.name);\n\n$('#change_username_form').submit(function() {\n  var field = $('#user_name');\n  field.val($.trim(field.val()));\n  var newName = field.val();\n  \n  if (newName.length) {\n    OF.api.request('/xp/users/'+ OF.user.id, {\n      method: 'PUT',\n      loader: '#submit',\n      params: {\n        user: { name: newName, has_set_name: 1 },\n      },\n      success: function() {\n        OF.user.name = newName;\n        OF.goBack();\n        OF.alert('Success', \"You have changed your name to: \"+ OF.user.name);\n      },\n      failure: function() {\n        OF.alert('Oops', 'Looks like that user name is already taken.')\n      },\n    });\n  } else {\n    OF.alert('Missing Data', 'Enter a new username in order to change your name.');\n  }\n  \n  return false;\n});\n\n$('#submit').touch(function() {\n  $('#change_username_form').submit();\n});","resume":null,"appear":null,"disappear":null,"exit":null,"html":"<div id='settings'>\n  <div id='header'>\n    Settings\n    <span class='loading'>\n      <span class='spinner'></span>\n    </span>\n  </div>\n  <div id='subheader'></div>\n  <div class='current_info'>\n    <div class='label'>Current Feint Name</div>\n    <div class='value'></div>\n  </div>\n  <form id='change_username_form'>\n    <div class='input_field'>\n      <label>New Feint Name</label>\n      <input id='user_name' name='user[name]' type='text'>\n    </div>\n    <div class='button' id='submit'>Okay</div>\n  </form>\n</div>\n"}