<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ScoreloopCore: Users</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ScoreloopCore</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d3/dc7/integrate-users.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Users </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The following table below gives an overview of the classes (including the purpose) associated with "Users". </p>
<table class="doxtable">
<tr>
<th>Class</th><th>Purpose  </th></tr>
<tr>
<td><a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a></td><td><ul>
<li>
Model class for Scoreloop user </li>
<li>
Provides access to user details </li>
</ul>
</td></tr>
<tr>
<td><a class="el" href="../../da/d1c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_user_controller.html">UserController </a> </td><td><ul>
<li>
Setting user details </li>
<li>
Retrieving a single user’s details </li>
<li>
Updating a single user’s details </li>
</ul>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="../../d6/d1d/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_users_controller.html">UsersController</a> </td><td><ul>
<li>
Searches for users on the server </li>
<li>
Filters search results according to some criteria </li>
</ul>
</td></tr>
</table>
<hr/>
 <b>Use Case 1: Retrieving User Data from the Server</b></p>
<ol type="1">
<li>Create an instance of <a class="el" href="../../da/d1c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_user_controller.html">UserController</a>.</li>
<li>Use the controller's <a class="el" href="../../">loadUser()</a> method to request details for the current session user.</li>
<li>Await successful server response via the delegate callbacks.</li>
<li>After a successful request, use the controller's <a class="el" href="../../">getUser()</a> method to access the <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> object.</li>
<li>Access individual user properties via the accessor methods of the <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> class.</li>
</ol>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">    <span class="comment">//Create an instance of UserController that uses the current session by default</span>
    UserController myUserController = <span class="keyword">new</span> UserController(<span class="keyword">new</span> MyUserControllerObserver());

    <span class="comment">//Use the controller request info for the current session user</span>
    myUserController.loadUser();

    <span class="comment">//It is a good idea to show a progress indicator while making the server request</span>
    showProgressIndicator();
</pre></div> </td></tr>
</table>
<p>The following methods should only be called after the asynchronous callbacks have been received.<br/>
 Developers should implement and observe standard callback methods, such as:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">   <span class="comment">//standard delegate callback</span>
   <span class="keyword">public</span> <span class="keywordtype">void</span> requestControllerDidReceiveResponse(RequestController aRequestController) {
   <span class="comment">//additional code here</span>
   ....
   }
</pre></div> </td></tr>
</table>
<p>After a successful response from the server, the user object can be accessed.</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">   <span class="comment">//access the User object</span>
   User myUser = myUserController.getUser();

   <span class="comment">//now access individual user properties, (see User API docs for more info)</span>
   String userLogin = myUser.getLogin();

   String userEmail = myUser.getEmail();
</pre></div> </td></tr>
</table>
<hr/>
<p><b>Use Case 2: Updating User Data </b></p>
<ol type="1">
<li>Create an instance of <a class="el" href="../../da/d1c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_user_controller.html">UserController</a> or re-use an existing instance.</li>
<li>Get the user properties to be updated from the application UI.</li>
<li>Get the current user from the Scoreloop <a class="el" href="../../d5/ddf/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_session.html">Session</a> object.</li>
<li>Use the setter methods of the <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> class to change the current user's properties with the new values from the UI.</li>
<li>Use the controller's <a class="el" href="../../">submitUser()</a> method to make the update on the server. Don't modify the User object while the asynchronous call is in progress, as this might result in unwanted data to be stored on the server.</li>
</ol>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">   <span class="comment">//Get values from the fields in the user interface</span>
   <span class="keyword">final</span> String username = nameView.getText().toString().trim();
   <span class="keyword">final</span> String email = emailView.getText().toString().trim();

   nameView.setText(username);
   emailView.setText(email);

   <span class="comment">//Get the current session user</span>
   <span class="keyword">final</span> User user = Session.getCurrentSession().getUser();

   <span class="comment">//Set the new user properties</span>
   user.setLogin(username);
   user.setEmailAddress(email);

   <span class="comment">//Use the controller to update the user on the server</span>
   myUserController.submitUser();

   <span class="comment">//Show a progress indicator while making the server request</span>
   showProgressIndicator();
</pre></div> </td></tr>
</table>
<hr/>
<p><b>Use Case 3: A Simple User Search Function</b></p>
<p>The following examples show how to implement a simple user search function. The <a class="el" href="../../d6/d1d/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_users_controller.html">UsersController</a> is used to manage lists of <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> objects and should be used in the following way.</p>
<ol type="1">
<li>Create an instance of <a class="el" href="../../d6/d1d/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_users_controller.html">UsersController</a>.</li>
<li>Set the search limit for the controller, (the search will stop once this number of users have been matched).</li>
<li>Set the global search flag, (or limit the search to users of the current game only).</li>
<li>Set the LoginSearchOperator, (from EXACT, LIKE, or PREFIX).</li>
<li>Obtain or create a search string.</li>
<li>Use the controller's <a class="el" href="../../">searchByLogin()</a> method to carry out the search.</li>
<li>Await a successful server response via the delegate callbacks.</li>
<li>After a successful request, user the controller's <a class="el" href="../../">getUsers()</a> method to access the list of users matched on the server.</li>
</ol>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">   <span class="comment">//First create the UsersController</span>
   UsersController myUsersController = <span class="keyword">new</span> UsersController(<span class="keyword">new</span> MyRequestControllerObserver());
  
   <span class="comment">//Set the limit for the controller, (the search will stop after this number of matches, default is 25)</span>
   myUsersController.setLimit(30);

   <span class="comment">//Set the global search flag, (in this case limit search to users of the current game, default is true)</span>
   myUsersController.setSearchesGlobal(<span class="keyword">false</span>);

   <span class="comment">//Set the search operator to search by prefix, (other search operators are available, default is PREFIX)</span>
   myUsersController.setSearchOperator(LoginSearchOperator.LIKE);

   <span class="comment">//An example search string</span>
   String searchString = <span class="stringliteral">&quot;Scor?&quot;</span>;

   <span class="comment">//Make the request to the server</span>
   myUserController.searchByLogin(searchString);

   <span class="comment">//Show progress indicator while making server request</span>
   showProgressIndicator();
</pre></div> </td></tr>
</table>
<p>When the controller makes the request to the server, the asynchronous delegate callbacks will be invoked.<br/>
 Only after a successful server request, (see <code>public</code> <code>void</code> <code>requestControllerDidReceiveResponse</code>(RequestController <code>aRequestController</code>) example above), will the list of <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> objects that were requested be accessible.</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment">  <span class="comment">//Access the list of Users</span>
  List&lt;User&gt; matchedUsers = myController.getUsers();
</pre></div> </td></tr>
</table>
<p><b>Use Case 4: Using the User Context to associate additional data with the User</b></p>
<p>Each user has a "user context", which is additional data (stored in a hash, actually a <a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html">java.util.Map</a>) that a game developer can define per game. This data can be stored on the server and retrieved as necessary. The type and size of data that can be stored is not limited by Scoreloop, although we recommend that it be kept to a minimum size so as not to reduce your game's optimal playability. The code example below shows how additional experience points can be associated with a user and stored in the user context. Note that such data is separate to any score that the user may achieve and does not affect the position of the user on any leaderboard.</p>
<p>To submit the user context to the server:</p>
<ol type="1">
<li>Get the <a class="el" href="../../d5/d1a/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1model_1_1_user.html">User</a> object.</li>
<li>Get an instance of the <a class="el" href="../../da/d1c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_user_controller.html">UserController</a>.</li>
<li>Set the experience points in the user context by calling the User object's <a class="el" href="../../">setContext()</a>.</li>
<li>Set the user of the UserController to the user object created above by calling <a class="el" href="../../">setUser()</a>.</li>
<li>Submit this data to the server using the UserController's <a class="el" href="../../">submitUserContext()</a>.</li>
</ol>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> <span class="comment">// Assumes exp_points is the skill value/ experience points gained by the user in the game.</span>
 Integer exp_points = <span class="keyword">new</span> Integer(123); 
 
 <span class="comment">//Step 1</span>
 User user = Session.getCurrentSession().getUser();
 
 <span class="comment">//Step 2</span>
 UserController myUserController = <span class="keyword">new</span> UserController(observer);
 
 <span class="comment">//Step 3</span>
 Map&lt;String, Object&gt; userContext = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();
 userContext.put(<span class="stringliteral">&quot;ExpPoints&quot;</span>, exp_points);
 user.setContext(userContext);
 
 <span class="comment">//Step 4</span>
 myUserController.setUser(user);
 
 <span class="comment">//Step 5</span>
 myUserController.submitUserContext();
</pre></div> </td></tr>
</table>
<p>To retrieve the user context from the server:</p>
<ol type="1">
<li>Get an instance of the <a class="el" href="../../da/d1c/classcom_1_1scoreloop_1_1client_1_1android_1_1core_1_1controller_1_1_user_controller.html">UserController</a>.</li>
<li>Call <a class="el" href="../../">loadUserContext()</a> using the created UserContoller.</li>
<li>Await a successful server response via the delegate callbacks.</li>
<li>After a successful request, in the callback, call the user object's <a class="el" href="../../">getContext()</a> method to retrieve the user context.</li>
<li>Access the required data from the Hash Map.</li>
</ol>
<p>How you could go about doing this would be something like: </p>
<table class="doxtable">
<tr>
<td><div class="fragment"><pre class="fragment"> <span class="comment">//Step 1</span>
 UserController myUserController = <span class="keyword">new</span> UserController(observer);
 
 <span class="comment">//Step 2</span>
 myUserController.loadUserContext();
 
 <span class="comment">//Step 3</span>
 <span class="comment">// in the callback:</span>
 User user = Session.getCurrentSession().getUser();
 Map&lt;String, Object&gt; userContext = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();
 Integer experiencePoints;

 <span class="comment">//Step 4</span>
 userContext = user.getContext();
 
 <span class="comment">//Step 5</span>
 experiencePoints = (Integer) userContext.get(<span class="stringliteral">&quot;ExpPoints&quot;</span>);
</pre></div> </td></tr>
</table>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../main.html">Scoreloop CoreSocial SDK for Android</a>      </li>
      <li class="navelem"><a class="el" href="../../db/d8c/coresocial-integration.html">Integration Guides</a>      </li>
<hr size="1"/><address style="text-align: right;"><small>
Generated on <!-- Mon Jun 6 2011 15:27:29 --> Mon Jun 6 2011 for ScoreloopCore <img src="scoreloop.png" height="50" />
</body>
</html>
